trigger:
  branches:
    include:
      - develop  # Change this if your default branch is different

pool:
  name: Self-Hosted

steps:
  - checkout: self
    persistCredentials: true

  - script: |
      git config --global user.email "davewevans72@gmail.com"
      git config --global user.name "davewevans"

      # Remove the existing remote if it already exists
      git remote remove github || true
      
      # Add GitHub as a new remote with correct authentication
      git remote add github https://$(GITHUB_PAT)@github.com/davewevans/Elevate-OTT-API-CMS.git
      
      # Verify authentication
      git remote -v
      
      # Push all branches and tags to GitHub
      git push --mirror github
    displayName: 'Mirror to GitHub'




