trigger:
  branches:
    include:
      - develop

pool:
  name: Self-Hosted

steps:
  - checkout: self
    persistCredentials: true

  - script: |
      git config --global user.email "davewevans72@gmail.com"
      git config --global user.name "davewevans"

      git remote remove github 2>nul || echo "No remote to remove"

      git remote add github https://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@github.com/davewevans/Elevate-OTT-API-CMS.git
      
      git remote -v
      
      # Push branches one by one instead of --mirror
      git push github develop --force
      git push github master --force
      git push github staging --force
    displayName: 'Mirror to GitHub'
